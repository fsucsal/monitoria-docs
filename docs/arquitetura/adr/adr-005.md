Perfeito. Segue a **ADR-005** revisada **em formato de Documento**, alinhada com tudo o que já foi definido sobre **arquitetura, JWT, monólito modular, simplicidade, padrões de segurança e perfil do time**. Ajustei linguagem, removi referências soltas e deixei mais normativa e consistente com as ADRs anteriores.

---

# ADR-005 — Controle de Acesso: RBAC (Role-Based Access Control)

**Status:** Aprovado

## Contexto

O sistema possui **perfis de usuário claramente definidos**, com responsabilidades bem delimitadas dentro do domínio da aplicação, tais como:

- Estudante
- Professor
- Coordenador
- Administrador

A aplicação adota as seguintes características já definidas em ADRs anteriores:

- Autenticação baseada em JWT (Access Token + Refresh Token)
- Backend desenvolvido em Spring
- Frontend em React (ou Angular)
- Arquitetura de Monólito Modular
- APIs REST documentadas via OpenAPI

Considerando:

- O perfil do time (majoritariamente iniciante)
- O contexto acadêmico
- A necessidade de simplicidade, clareza e baixo custo de manutenção

é necessário adotar um modelo de controle de acesso que seja fácil de implementar, compreender, auditar e evoluir, sem introduzir complexidade desnecessária.

## Decisão

Adotar **RBAC (Role-Based Access Control)** como o modelo oficial de controle de acesso do sistema.

O modelo seguirá os seguintes princípios:

- O sistema possuirá um conjunto **fixo e bem definido de roles**
- As permissões serão associadas diretamente às roles
- Cada usuário poderá possuir **uma ou mais roles**
- A autorização será aplicada:

  - Primariamente no nível dos endpoints da API
  - Complementarmente no nível de Services para regras críticas de negócio

- As roles do usuário autenticado estarão presentes no **JWT**
- O mecanismo de autorização será integrado ao **Spring Security**
- O backend será sempre a **fonte da verdade** para decisões de autorização

O RBAC será tratado como o padrão oficial de autorização do projeto.

## Alternativas Consideradas

- ABAC (Attribute-Based Access Control)
- ACL (Access Control List por recurso)
- Modelo totalmente dinâmico de permissões armazenadas em banco

Essas alternativas foram descartadas por:

- Aumentarem significativamente a complexidade técnica
- Dificultarem o entendimento por desenvolvedores iniciantes
- Exigirem maior esforço de manutenção e governança
- Não oferecerem benefícios claros para o escopo atual do sistema

## Consequências

### Consequências Positivas

- Modelo simples e amplamente conhecido
- Fácil entendimento e adoção pelo time
- Facilidade de auditoria e revisão de permissões
- Boa integração com JWT e Spring Security
- Baixo custo de implementação e manutenção
- Alinhamento com a estrutura organizacional do domínio

### Consequências Negativas

- Menor flexibilidade em comparação a modelos baseados em atributos
- Alterações de permissões podem exigir mudanças no código
- Não permite regras altamente dinâmicas por usuário sem customizações adicionais

## Diretrizes de Implementação

- As roles devem:

  - Ser definidas de forma centralizada no backend
  - Utilizar nomenclatura padronizada (exemplo: `ROLE_STUDENT`, `ROLE_PROFESSOR`, `ROLE_COORDINATOR`, `ROLE_ADMIN`)

- A autorização deve:

  - Ser aplicada nos endpoints via mecanismos do framework
  - Ser reforçada nos Services quando envolver regras de negócio sensíveis

- O frontend deve:

  - Utilizar as roles apenas para controle de exibição de interface
  - Nunca assumir que a autorização no frontend é suficiente

- Nenhuma decisão de segurança deve depender exclusivamente do frontend

---
