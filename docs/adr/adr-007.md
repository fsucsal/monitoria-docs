# ADR-007 — Geração de certificados: processamento assíncrono com extração futura para microsserviço

**Status:** Aprovado

## Contexto

A geração de certificados envolve operações potencialmente pesadas, como:

- Geração de PDF
- Escrita em disco ou storage externo
- Envio de e-mail
- Registro de metadados para auditoria

Além disso, esse mesmo módulo de certificados deverá futuramente **atender também outro sistema (Sistema de Eventos)**, tornando necessária sua **independência como serviço no médio prazo**.

No momento atual, a aplicação segue um modelo de **Monólito Modular**.

---

## Decisão

A geração de certificados será implementada como um **processo 100% assíncrono**, utilizando:

- Fila de processamento
- Worker dedicado
- Execução desacoplada da requisição HTTP

Arquiteturalmente, o módulo de certificados será desenvolvido já com características de **serviço independente**, respeitando:

- Isolamento de domínio
- Interfaces bem definidas
- Comunicação assíncrona

Esse módulo terá como **diretriz evolutiva obrigatória** a futura extração para um **microsserviço compartilhado entre sistemas**.

---

## Alternativas Consideradas

- Geração síncrona via API
- Geração por batch manual (processos agendados)

---

## Consequências

- ✅ Evita timeout e bloqueio de requisições HTTP
- ✅ Melhor experiência para o usuário
- ✅ Permite escalabilidade independente do processamento
- ✅ Arquitetura preparada para extração futura como microsserviço
- ✅ Reutilização do serviço pelo Sistema de Eventos
- ❌ Exige fila, worker e controle de estado do job
- ❌ Aumenta levemente a complexidade inicial do projeto
