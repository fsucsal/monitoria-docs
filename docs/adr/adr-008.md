# ADR-008 — Armazenamento de Arquivos: Object Storage com Preparação para Microsserviço

**Status:** Aprovado

## Contexto

Os certificados gerados pelo sistema:

- Precisam ser armazenados de forma segura e durável
- Devem estar disponíveis para download posterior
- Serão utilizados futuramente por **outro sistema (Sistema de Eventos)**

Como a **geração de certificados já é assíncrona** e tem **diretriz de extração para microsserviço**, o modelo de armazenamento também precisa ser:

- Independente do backend principal
- Escalável
- Resiliente a falhas

---

## Decisão

Utilizar **Object Storage compatível com S3** como padrão para armazenamento de certificados em PDF.

Durante o desenvolvimento acadêmico, o projeto poderá utilizar:

- Storage local compatível com S3 (ex: MinIO)

Em produção, será utilizado:

- Serviço de object storage gerenciado (compatível com S3)

Os certificados serão acessados apenas por:

- URLs temporárias (presigned URL)
- Ou via API autenticada

O módulo de certificados será **o único responsável pelo acesso ao storage**, garantindo isolamento para futura extração como microsserviço.

---

## Alternativas Consideradas

- Armazenamento local em disco
- Armazenamento de arquivos no banco de dados como BLOB

---

## Consequências

- ✅ Alta durabilidade e confiabilidade dos arquivos
- ✅ Escalabilidade automática
- ✅ Separação entre aplicação e mídia
- ✅ Facilita integração com outros sistemas no futuro
- ✅ Preparado para extração como microsserviço
- ✅ Permite uso de MinIO no ambiente acadêmico
- ❌ Introduz dependência de infraestrutura adicional
- ❌ Leve aumento de complexidade para configuração inicial

---
