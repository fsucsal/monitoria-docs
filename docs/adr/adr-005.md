# ADR-005 — Controle de acesso: RBAC (Role-Based Access Control)

**Status:** Aprovado

## Contexto

O sistema possui **perfis de usuário bem definidos**, com responsabilidades claras dentro do domínio da aplicação, tais como:

- Estudante
- Professor
- Coordenador
- Administrador

A aplicação utiliza:

- Autenticação via JWT
- Backend em Spring
- Frontend em React
- Arquitetura Monólito Modular

Dado o perfil do time (majoritariamente iniciante) e o contexto acadêmico, é necessário adotar um modelo de controle de acesso que seja:

- Simples de implementar
- Fácil de entender
- Fácil de manter
- Fácil de auditar

## Decisão

Implementar **RBAC (Role-Based Access Control)** como modelo oficial de controle de acesso do sistema, com os seguintes princípios:

- ✅ O sistema possuirá **papéis (roles) fixos**
- ✅ As permissões serão associadas diretamente às **roles**
- ✅ Cada usuário possuirá **um ou mais papéis**
- ✅ O controle será aplicado:
  - Nos endpoints da API
  - E, quando necessário, em nível de serviço
- ✅ A autorização será integrada ao mecanismo de segurança do Spring através do :contentReference[oaicite:0]{index=0}
- ✅ As roles estarão presentes no **JWT** do usuário autenticado

O RBAC será o modelo oficial de autorização do projeto.

## Alternativas Consideradas

- ABAC (controle baseado em atributos)
- ACL (controle de acesso por recurso)
- Permissões totalmente dinâmicas em banco

Essas alternativas foram descartadas por:

- Adicionarem complexidade excessiva
- Dificultarem o entendimento por desenvolvedores iniciantes
- Exigirem maior esforço de manutenção
- Não trazerem benefícios claros para o escopo atual do projeto

## Consequências

### Positivas

- ✅ Implementação simples
- ✅ Fácil auditoria de permissões
- ✅ Fácil entendimento pelo time
- ✅ Condizente com a estrutura organizacional do sistema
- ✅ Integração direta com JWT e Spring Security
- ✅ Baixo custo de manutenção

### Negativas

- ❌ Menor flexibilidade em comparação a ABAC
- ❌ Alterações de papéis exigem mudanças no código
- ❌ Não permite regras dinâmicas complexas por usuário

## Diretrizes de Implementação

- As roles devem:

  - Ser definidas como constantes no sistema
  - Possuir nomenclatura padronizada (ex: `ROLE_ADMIN`, `ROLE_PROFESSOR`)

- A autorização deve:

  - Ser aplicada nos endpoints via anotações
  - Opcionalmente reforçada nos Services para regras críticas

- O frontend deve:

  - Utilizar as roles do usuário apenas para controle de exibição
  - Nunca confiar exclusivamente nelas para segurança

- O backend é sempre a **fonte da verdade da autorização**.

---
