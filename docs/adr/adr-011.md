# ADR-011 — Relatórios: geração sob demanda com cache temporário

**Status:** Aprovado

## Contexto

O sistema possui diversos tipos de relatórios, como:

- Inscrições por período
- Participação em monitorias
- Carga horária cumprida
- Certificados emitidos
- Indicadores por curso, turma e disciplina

Esses relatórios:

- Variam de acordo com filtros dinâmicos (período, curso, turma, status)
- São utilizados principalmente para **análise administrativa**
- Nem todos precisam ser armazenados permanentemente

Além disso, o projeto deve evitar:

- Processamentos desnecessários em background
- Crescimento excessivo de tabelas apenas para relatórios
- Complexidade operacional precoce

---

## Decisão

Os relatórios serão gerados sob demanda (**on-demand**), a partir de consultas diretas ao banco de dados, com as seguintes diretrizes:

- Execução via endpoints específicos
- Suporte a filtros dinâmicos
- Paginação obrigatória em relatórios grandes
- Possibilidade de **cache temporário** para relatórios:
  - Muito acessados
  - De alto custo computacional
- Exportação em formato PDF

Quando um relatório exigir **processamento pesado ou agregações complexas**, poderá ser:

- Otimizado com views
- Otimizado com índices específicos
- Ou, futuramente, convertido em processamento assíncrono

---

## Alternativas consideradas

- Relatórios pré-processados em batch
- Relatórios sempre persistidos no banco
- Armazenamento de relatórios como arquivos permanentes

---

## Consequências

- ✅ Menor consumo de armazenamento
- ✅ Dados sempre atualizados
- ✅ Alta flexibilidade de filtros
- ✅ Implementação mais simples no início do projeto
- ✅ Menor complexidade operacional
- ❌ Pode exigir otimização de queries
- ❌ Pode aumentar carga no banco em horários de pico
